<form ngForm="form" (ngSubmit)="submitForm()">
  <div class="m-2 flex-col rounded-lg bg-white px-8 py-8 dark:bg-night-700 sm:flex-row">
    <div class="mb-4 flex items-center justify-between">
      <div class="flex-col items-center">
        <h3 class="text-md font-bold text-gray-900 dark:text-night-50">
          {{ invoice.id != null ? 'Edit' : 'Create' }} invoice {{ invoice.id != null ? '#'.concat(invoice.id) : '' }}
        </h3>
        <span class="text-sm text-gray-400 dark:text-night-300">{{invoice.status | uppercase}}</span>
      </div>
    </div>
    <div class="form__group flex grid grid-cols-1 space-y-2 md:grid-cols-1 md:space-y-2">
      <div class="relative w-full md:w-1/5">
        <input
          type="datetime-local"
          id="due_date"
          class="peer block grid-cols-2"
          name="due_date"
          [ngModel]="invoice.due_date | date: 'yyyy-MM-dd HH:mm'"
          placeholder=" "
          [readOnly]="invoice.due_date"
          required />
        <label
          for="due_date"
          class="absolute top-2 left-1 z-10 origin-[0] -translate-y-4 scale-95 transform bg-white px-2 text-sm text-gray-500 duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-95 peer-focus:px-2 peer-focus:text-primary-500 dark:bg-night-700 dark:text-night-200">
          Due Date
        </label>
      </div>
      <div class="relative w-full md:w-1/3">
        <input
                type="email"
                id="email"
                class="peer block grid-cols-2"
                name="email"
                [ngModel]="invoice.email"
                placeholder=" "
                [readOnly]="invoice.email"
                required />
        <label
                for="email"
                class="absolute top-2 left-1 z-10 origin-[0] -translate-y-4 scale-95 transform bg-white px-2 text-sm text-gray-500 duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-95 peer-focus:px-2 peer-focus:text-primary-500 dark:bg-night-700 dark:text-night-200">
          Email
        </label>
      </div>
    </div>
  </div>
  <app-item-form *ngIf="!invoice.id"></app-item-form>
  <div class="m-2 flex-col rounded-lg bg-white px-8 py-8 dark:bg-night-700 sm:flex-row">
    <div class="mb-4 flex items-center justify-between">
      <div class="flex-col items-center">
        <span class="text-sm text-gray-400 dark:text-night-300">items</span>
      </div>
    </div>
    <div class="form__group">
      <div class="relative mt-4 overflow-x-auto">
        <table class="w-full table-auto">
          <!--Table head-->
          <thead class="text-xs uppercase text-gray-400 dark:text-night-300">
            <tr>
              <th class="py-3 text-left text-center">#</th>
              <th class="py-3 text-left">Product</th>
              <th class="py-3 text-center">Price $</th>
              <th class="py-3 text-center">Quantity</th>
              <th class="py-3 text-center">Subtotal</th>
            </tr>
          </thead>
          <!--end Table head-->
          <!--Table body-->
          <tbody *ngIf="invoice.products != undefined">
            <tr
              *ngFor="let product of invoice.products; let i = index"
              class="border-b border-dashed border-gray-200 hover:bg-gray-100 dark:border-night-500 dark:hover:bg-night-600">
              <td class="py-2 pr-2 text-center">
                <span class="text-xs font-semibold text-gray-400 dark:text-night-300">{{ i + 1}}</span>
              </td>
              <td class="py-2 pl-2 text-left">
                <span class="text-sm font-semibold text-gray-400 dark:text-night-200">{{ product.name }}</span>
              </td>
              <td class="py-2 pl-2 text-center">
                <span class="text-sm font-semibold text-gray-400 dark:text-night-200">{{
                  product.sold_value / 100 | currency: 'BRL':'symbol'
                }}</span>
              </td>
              <td class="py-2 pl-2 text-center">
                <span class="text-sm font-semibold text-gray-400 dark:text-night-200">{{ product.quantity }}</span>
              </td>
              <td class="py-2 pl-2 text-center">
                <span class="text-sm font-semibold text-gray-400 dark:text-night-200">{{
                  (product.sold_value * product.quantity) / 100 | currency: 'BRL'
                }}</span>
              </td>
            </tr>
          </tbody>
          <!--end::Table body-->
        </table>
        <div class="w-full flex justify-end">
          <span class="text-xs font-semibold text-gray-400 dark:text-night-300">Total: {{invoice.total_amount / 100 | currency: 'BRL':'symbol'}}</span>
        </div>
      </div>
    </div>
  </div>
</form>
